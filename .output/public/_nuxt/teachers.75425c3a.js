import{u as w}from"./teacher.72b3b57e.js";import{n as g,s as k,x as q,q as o,o as h,y as N,w as t,b as e,a as m,c as E,F as X,z as A,u as l,t as b,r as U,B as D,C as L,D as G,E as R,d as F,V as M,G as z,v as $}from"./entry.ee28b950.js";import{_ as P}from"./Error.vue.49b1e664.js";import{e as j}from"./index.89ded283.js";import"./fetch.23709f3e.js";const H=m("thead",null,[m("tr",null,[m("th",null,"Nombre completo"),m("th",null,"Email"),m("th",null,"Título"),m("th",null,"Acciones")])],-1),I=g({__name:"TableTeachers",async setup(y){let u,s;const a=w(),{teachers:i}=k(a);[u,s]=q(()=>a.getAll()),await u,s();const n=r=>{a.setCurrent(r),a.setShowForm(!0)},f=r=>{a.setCurrent(r),a.setShowConfirm(!0)};return(r,V)=>{const p=o("VBtn"),c=o("VTable"),d=o("VCard");return h(),N(d,{elevation:"5"},{default:t(()=>[e(c,null,{default:t(()=>[H,m("tbody",null,[(h(!0),E(X,null,A(l(i),_=>(h(),E("tr",null,[m("td",null,b(_.fullName),1),m("td",null,b(_.email),1),m("td",null,b(_.degree),1),m("td",null,[e(p,{icon:"mdi-eye",color:"warning",variant:"text",title:"Editar",onClick:v=>n(_)},null,8,["onClick"]),e(p,{icon:"mdi-delete",color:"error",variant:"text",title:"Eliminar",onClick:v=>f(_)},null,8,["onClick"])])]))),256))])]),_:1})]),_:1})}}}),J=g({__name:"FormTeacher",setup(y){const u=U(null),s=w(),{loading:a,current:i}=k(s),n=D({fullName:"",email:"",degree:""}),f={required:[c=>!!c||"campo requerido!"],email:[c=>!!c||"El correo es requerido",c=>/.+@.+\..+/.test(c)||"El correo debe ser válido"]},r=L(()=>i.value?"Editar":"Agregar"),V=async()=>{const{valid:c}=await u.value.validate();c&&(i.value?await s.update({_id:i.value._id,...n}):await s.create(n))},p=()=>{s.setShowForm(!1)};return G(()=>{i.value&&(n.fullName=i.value.fullName,n.email=i.value.email,n.degree=i.value.degree)}),R(()=>{s.setCurrent(null)}),(c,d)=>{const _=o("VCardTitle"),v=P,C=o("VTextField"),T=o("VBtn"),B=o("VCardText"),x=o("VCard");return h(),N(x,{elevation:"5"},{default:t(()=>[e(_,{class:"text-center text-h4"},{default:t(()=>[F(b(l(r))+" profesor ",1)]),_:1}),e(B,null,{default:t(()=>[e(l(M),{ref_key:"formRef",ref:u,onSubmit:z(V,["prevent"])},{default:t(()=>[e(v),e(C,{class:"mt-3",modelValue:l(n).fullName,"onUpdate:modelValue":d[0]||(d[0]=S=>l(n).fullName=S),variant:"outlined",label:"Nombre",rules:f.required},null,8,["modelValue","rules"]),e(C,{class:"mt-1",type:"email",modelValue:l(n).email,"onUpdate:modelValue":d[1]||(d[1]=S=>l(n).email=S),variant:"outlined",label:"Email",rules:f.email},null,8,["modelValue","rules"]),e(C,{class:"mt-3",modelValue:l(n).degree,"onUpdate:modelValue":d[2]||(d[2]=S=>l(n).degree=S),variant:"outlined",label:"Título",rules:f.required},null,8,["modelValue","rules"]),e(T,{class:"mt-4",variant:"tonal",type:"submit",loading:l(a),block:"",color:"primary",text:"Guardar"},null,8,["loading"]),e(T,{class:"mt-2",variant:"tonal",disabled:l(a),color:"error",block:"",onClick:p,text:"Cancelar"},null,8,["disabled"])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}}}),K=g({__name:"ConfirmTeacher",setup(y){const u=w(),{current:s,loading:a}=k(u),i=()=>{u.setShowConfirm(!1)},n=async()=>{await u.delete(s.value._id)};return R(()=>{u.setCurrent(null)}),(f,r)=>{const V=o("VCardTitle"),p=o("VCardText"),c=o("VSpacer"),d=o("VBtn"),_=o("VCardActions"),v=o("VCard");return h(),N(v,null,{default:t(()=>[e(V,{class:"text-center"},{default:t(()=>[F(" Eliminar profesor ")]),_:1}),e(p,null,{default:t(()=>{var C;return[F(" ¿Estás seguro de eliminar a "+b((C=l(s))==null?void 0:C.fullName)+"? ",1)]}),_:1}),e(_,null,{default:t(()=>[e(c),e(d,{variant:"tonal",text:"Cancelar",onClick:i,disabled:l(a),color:"error"},null,8,["disabled"]),e(d,{variant:"tonal",text:"Confirmar",onClick:n,loading:l(a),color:"primary"},null,8,["loading"])]),_:1})]),_:1})}}}),O=m("h2",{class:"text-center text-h3"},"Profesores",-1),te=g({__name:"teachers",setup(y){const u=w(),{showForm:s,showConfirm:a,teachersReportXLSX:i}=k(u),n=()=>{u.setShowForm(!0)};return(f,r)=>{const V=o("VCol"),p=o("VRow"),c=o("VBtn"),d=o("VSpacer"),_=I,v=o("VContainer"),C=J,T=o("VDialog"),B=K;return h(),E(X,null,[e(v,null,{default:t(()=>[e(p,null,{default:t(()=>[e(V,null,{default:t(()=>[O]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(V,{cols:"auto"},{default:t(()=>[e(c,{color:"success",icon:"mdi-plus",onClick:r[0]||(r[0]=x=>n())})]),_:1}),e(d),e(V,{cols:"auto"},{default:t(()=>[e(c,{color:"success",icon:"mdi-file-excel",onClick:r[1]||(r[1]=x=>("exportXSLX"in f?f.exportXSLX:l(j))(l(i),"profesores"))})]),_:1})]),_:1}),e(p,null,{default:t(()=>[e(V,null,{default:t(()=>[e(_)]),_:1})]),_:1})]),_:1}),e(T,{modelValue:l(s),"onUpdate:modelValue":r[2]||(r[2]=x=>$(s)?s.value=x:null),persistent:"","max-width":"650"},{default:t(()=>[e(C)]),_:1},8,["modelValue"]),e(T,{modelValue:l(a),"onUpdate:modelValue":r[3]||(r[3]=x=>$(a)?a.value=x:null),persistent:"","max-width":"450"},{default:t(()=>[e(B)]),_:1},8,["modelValue"])],64)}}});export{te as default};
