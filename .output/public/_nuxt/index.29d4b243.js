import{u as j}from"./fetch.23709f3e.js";import{H as k,L as C,n as v,M as D,N as O,O as E,P as L,Q as q,r as I,D as R,j as Z,h as z,R as x,S}from"./entry.ee28b950.js";const X=k("dashboard",{state:()=>({data:[]}),actions:{async getStatistics(){const{data:t,error:s}=await j("/api/statistics","$qQj0vXwSAy");this.data=t.value.data}},getters:{barServices(t){const s=t.data.map(r=>r.name),e=t.data.map(r=>r.courses.reduce((n,a)=>a.inscriptions.length+n,0));return{labels:s,datasets:[{label:"Personas",backgroundColor:"#f87979",data:e}]}},pieZone(t){const s=["urbana","rural"],e=s.map(r=>t.data.reduce((n,a)=>{let o=0;return a.courses.forEach(i=>o+=i.inscriptions.filter(c=>c.zone===r).length),o+n},0));return{labels:s,datasets:[{label:"Personas",backgroundColor:["#8EDFF4","#AABC58"],data:e}]}},barCourses(t){return s=>{const e=t.data.find(a=>a._id===s),r=(e==null?void 0:e.courses.map(a=>a.name))??[],n=(e==null?void 0:e.courses.map(a=>a.inscriptions.length))??[];return{labels:r,datasets:[{label:"Personas",backgroundColor:["#8EDFF4","#AABC58"],data:n}]}}},pieSexByService(t){return s=>{const e=t.data.find(a=>a._id===s),r=["Masculino","Femenino"],n=[(e==null?void 0:e.courses.reduce((a,o)=>o.inscriptions.filter(i=>i.sexo==="M").length+a,0))??0,(e==null?void 0:e.courses.reduce((a,o)=>o.inscriptions.filter(i=>i.sexo==="F").length+a,0))??0];return{labels:r,datasets:[{label:"Personas",backgroundColor:["#8EDFF4","#f87979"],data:n}]}}}}}),w={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},K={type:{type:String,required:!0},...w},Q=q[0]==="2"?(t,s)=>Object.assign(t,{attrs:s}):(t,s)=>Object.assign(t,s);function d(t){return S(t)?x(t):t}function U(t){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return S(s)?new Proxy(t,{}):t}function _(t,s){const e=t.options;e&&s&&Object.assign(e,s)}function B(t,s){t.labels=s}function F(t,s,e){const r=[];t.datasets=s.map(n=>{const a=t.datasets.find(o=>o[e]===n[e]);return!a||!n.data||r.includes(a)?{...n}:(r.push(a),Object.assign(a,n),a)})}function $(t,s){const e={labels:[],datasets:[]};return B(e,t.labels),F(e,t.datasets,s),e}const H=v({props:K,setup(t,s){let{expose:e}=s;const r=I(null),n=D(null);e({chart:n});const a=()=>{if(!r.value)return;const{type:c,data:f,options:b,plugins:p,datasetIdKey:h}=t,g=$(f,h),u=U(g,f);n.value=new C(r.value,{type:c,data:u,options:{...b},plugins:p})},o=()=>{const c=x(n.value);c&&(c.destroy(),n.value=null)},i=c=>{c.update(t.updateMode)};return R(a),Z(o),z([()=>t.options,()=>t.data],(c,f)=>{let[b,p]=c,[h,g]=f;const u=x(n.value);if(!u)return;let y=!1;if(b){const l=d(b),m=d(h);l&&l!==m&&(_(u,l),y=!0)}if(p){const l=d(p.labels),m=d(g.labels),P=d(p.datasets),M=d(g.datasets);l!==m&&(B(u.config.data,l),y=!0),P&&P!==M&&(F(u.config.data,P,t.datasetIdKey),y=!0)}y&&i(u)},{deep:!0}),()=>O("canvas",{ref:r})}});function A(t,s){return C.register(s),v({props:w,setup(e,r){let{expose:n}=r;const a=D(null),o=i=>{a.value=i==null?void 0:i.chart};return n({chart:a}),()=>O(H,Q({ref:o},{type:t,...e}))}})}const G=A("bar",E),J=A("pie",L);export{G as B,J as P,X as u};
