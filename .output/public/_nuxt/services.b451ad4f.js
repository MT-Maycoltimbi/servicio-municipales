import{u as T}from"./service.50aeee36.js";import{n as g,s as h,x as R,q as n,o as x,y as X,w as t,b as e,a as p,c as y,F as D,z as q,u as r,t as b,r as A,B as L,C as N,D as U,E,d as F,V as G,G as M,v as $}from"./entry.ee28b950.js";import{e as z}from"./index.89ded283.js";import"./fetch.23709f3e.js";const j=p("thead",null,[p("tr",null,[p("th",null,"Nombre"),p("th",null,"Descripción"),p("th",null,"Acciones")])],-1),H=g({__name:"TableServices",async setup(k){let c,a;const o=T(),{services:i}=h(o);[c,a]=R(()=>o.getServices()),await c,a();const s=l=>{o.setCurrent(l),o.setShowForm(!0)},v=l=>{o.setCurrent(l),o.setShowConfirm(!0)};return(l,V)=>{const m=n("VBtn"),u=n("VTable"),d=n("VCard");return x(),X(d,{elevation:"5"},{default:t(()=>[e(u,null,{default:t(()=>[j,p("tbody",null,[(x(!0),y(D,null,q(r(i),_=>(x(),y("tr",null,[p("td",null,b(_.name),1),p("td",null,b(_.description),1),p("td",null,[e(m,{icon:"mdi-eye",color:"warning",variant:"text",title:"Editar",onClick:C=>s(_)},null,8,["onClick"]),e(m,{icon:"mdi-delete",color:"error",variant:"text",title:"Eliminar",onClick:C=>v(_)},null,8,["onClick"])])]))),256))])]),_:1})]),_:1})}}}),I=g({__name:"FormService",setup(k){const c=A(null),a=T(),{loading:o,current:i}=h(a),s=L({name:"",description:""}),v={required:[u=>!!u||"campo requerido!"]},l=N(()=>i.value?"Editar":"Agregar"),V=async()=>{const{valid:u}=await c.value.validate();u&&(i.value?await a.update({...s,_id:i.value._id}):await a.create(s))},m=()=>{a.setShowForm(!1)};return U(()=>{i.value&&(s.name=i.value.name,s.description=i.value.description)}),E(()=>{a.setCurrent(null)}),(u,d)=>{const _=n("VCardTitle"),C=n("VTextField"),S=n("VBtn"),w=n("VCardText"),B=n("VCard");return x(),X(B,{elevation:"5"},{default:t(()=>[e(_,{class:"text-center text-h4"},{default:t(()=>[F(b(r(l))+" Servicio ",1)]),_:1}),e(w,null,{default:t(()=>[e(r(G),{ref_key:"formRef",ref:c,onSubmit:M(V,["prevent"])},{default:t(()=>[e(C,{modelValue:r(s).name,"onUpdate:modelValue":d[0]||(d[0]=f=>r(s).name=f),variant:"outlined",label:"Nombre",rules:v.required},null,8,["modelValue","rules"]),e(C,{class:"mt-1",modelValue:r(s).description,"onUpdate:modelValue":d[1]||(d[1]=f=>r(s).description=f),variant:"outlined",label:"Descripción",rules:v.required},null,8,["modelValue","rules"]),e(S,{class:"mt-4",variant:"tonal",type:"submit",loading:r(o),block:"",color:"primary",text:"Guardar"},null,8,["loading"]),e(S,{class:"mt-2",variant:"tonal",disabled:r(o),color:"error",block:"",onClick:m,text:"Cancelar"},null,8,["disabled"])]),_:1},8,["onSubmit"])]),_:1})]),_:1})}}}),J=g({__name:"ConfirmService",setup(k){const c=T(),{current:a,loading:o}=h(c),i=()=>{c.setShowConfirm(!1)},s=async()=>{await c.delete(a.value._id)};return E(()=>{c.setCurrent(null)}),(v,l)=>{const V=n("VCardTitle"),m=n("VCardText"),u=n("VSpacer"),d=n("VBtn"),_=n("VCardActions"),C=n("VCard");return x(),X(C,null,{default:t(()=>[e(V,{class:"text-center"},{default:t(()=>[F(" Eliminar servicio ")]),_:1}),e(m,null,{default:t(()=>{var S;return[F(" ¿Estás seguro de eliminar el servicio "+b((S=r(a))==null?void 0:S.name)+"? ",1)]}),_:1}),e(_,null,{default:t(()=>[e(u),e(d,{variant:"tonal",text:"Cancelar",onClick:i,disabled:r(o),color:"error"},null,8,["disabled"]),e(d,{variant:"tonal",text:"Confirmar",onClick:s,loading:r(o),color:"primary"},null,8,["loading"])]),_:1})]),_:1})}}}),K=p("h2",{class:"text-center text-h3"},"Servicios",-1),Y=g({__name:"services",setup(k){const c=T(),{showForm:a,showConfirm:o,servicesReportXLSX:i}=h(c),s=()=>{c.setShowForm(!0)};return(v,l)=>{const V=n("VCol"),m=n("VRow"),u=n("VBtn"),d=n("VSpacer"),_=H,C=n("VContainer"),S=I,w=n("VDialog"),B=J;return x(),y(D,null,[e(C,null,{default:t(()=>[e(m,null,{default:t(()=>[e(V,null,{default:t(()=>[K]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(V,{cols:"auto"},{default:t(()=>[e(u,{color:"success",icon:"mdi-plus",onClick:l[0]||(l[0]=f=>s())})]),_:1}),e(d),e(V,{cols:"auto"},{default:t(()=>[e(u,{color:"success",icon:"mdi-file-excel",onClick:l[1]||(l[1]=f=>("exportXSLX"in v?v.exportXSLX:r(z))(r(i),"servicios"))})]),_:1})]),_:1}),e(m,null,{default:t(()=>[e(V,null,{default:t(()=>[e(_)]),_:1})]),_:1})]),_:1}),e(w,{modelValue:r(a),"onUpdate:modelValue":l[2]||(l[2]=f=>$(a)?a.value=f:null),persistent:"","max-width":"650"},{default:t(()=>[e(S)]),_:1},8,["modelValue"]),e(w,{modelValue:r(o),"onUpdate:modelValue":l[3]||(l[3]=f=>$(o)?o.value=f:null),persistent:"","max-width":"450"},{default:t(()=>[e(B)]),_:1},8,["modelValue"])],64)}}});export{Y as default};
